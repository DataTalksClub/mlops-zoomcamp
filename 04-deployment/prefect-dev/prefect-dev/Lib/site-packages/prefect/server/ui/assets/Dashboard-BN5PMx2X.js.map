{"version":3,"file":"Dashboard-BN5PMx2X.js","sources":["../../src/pages/Dashboard.vue"],"sourcesContent":["<template>\n  <p-layout-default class=\"workspace-dashboard\">\n    <template #header>\n      <PageHeading :crumbs=\"crumbs\" class=\"workspace-dashboard__page-heading\">\n        <template v-if=\"!empty\" #actions>\n          <div class=\"workspace-dashboard__header-actions\">\n            <FlowRunTagsInput v-model:selected=\"filter.tags\" empty-message=\"All tags\" />\n            <DateRangeSelect v-model=\"filter.range\" class=\"workspace-dashboard__date-select\" />\n          </div>\n        </template>\n      </PageHeading>\n    </template>\n    <template v-if=\"loaded\">\n      <template v-if=\"empty\">\n        <FlowRunsPageEmptyState />\n      </template>\n      <template v-else>\n        <div class=\"workspace-dashboard__grid\">\n          <WorkspaceDashboardFlowRunsCard :filter=\"filter\" />\n          <div class=\"workspace-dashboard__side\">\n            <CumulativeTaskRunsCard :filter=\"tasksFilter\" />\n            <DashboardWorkPoolsCard class=\"workspace-dashboard__work-pools\" :filter=\"filter\" />\n          </div>\n        </div>\n      </template>\n    </template>\n    <MarketingBanner\n      title=\"Ready to scale?\"\n      subtitle=\"Automations, role and object-level security, and serverless push work pools on Prefect Cloud\"\n    >\n      <template #actions>\n        <p-button to=\"https://www.prefect.io/cloud-vs-oss?utm_source=oss&utm_medium=oss&utm_campaign=oss&utm_term=none&utm_content=none\" target=\"_blank\" primary>\n          Upgrade to Cloud\n        </p-button>\n      </template>\n    </MarketingBanner>\n  </p-layout-default>\n</template>\n\n<script setup lang=\"ts\">\n  import { Crumb } from '@prefecthq/prefect-design'\n  import {\n    DashboardWorkPoolsCard,\n    WorkspaceDashboardFlowRunsCard,\n    CumulativeTaskRunsCard,\n    PageHeading,\n    FlowRunTagsInput,\n    FlowRunsPageEmptyState,\n    useWorkspaceApi,\n    subscriptionIntervalKey,\n    mapper,\n    TaskRunsFilter,\n    MarketingBanner,\n    Getter,\n    DateRangeSelect,\n    useWorkspaceDashboardFilterFromRoute\n  } from '@prefecthq/prefect-ui-library'\n  import { useSubscription } from '@prefecthq/vue-compositions'\n  import { secondsInDay, secondsToMilliseconds } from 'date-fns'\n  import { computed, provide } from 'vue'\n\n  provide(subscriptionIntervalKey, {\n    interval: secondsToMilliseconds(30),\n  })\n\n  const api = useWorkspaceApi()\n  const flowRunsCountAllSubscription = useSubscription(api.flowRuns.getFlowRunsCount, [{}])\n  const loaded = computed(() => flowRunsCountAllSubscription.executed)\n  const empty = computed(() => flowRunsCountAllSubscription.response === 0)\n  const crumbs: Crumb[] = [{ text: 'Dashboard' }]\n\n  const filter = useWorkspaceDashboardFilterFromRoute({\n    range: { type: 'span', seconds: -secondsInDay },\n    tags: [],\n  })\n\n  const tasksFilter: Getter<TaskRunsFilter> = () => mapper.map('WorkspaceDashboardFilter', filter, 'TaskRunsFilter')\n</script>\n\n<style>\n.workspace-dashboard__page-heading { @apply\n  grid\n  md:flex\n  md:flex-row\n  md:items-center\n}\n\n.workspace-dashboard__header-actions { @apply\n  flex\n  flex-col\n  w-full\n  max-w-full\n  gap-2\n  md:w-auto\n  md:inline-flex\n  md:flex-row\n}\n\n.workspace-dashboard__date-select { @apply\n  min-w-0\n}\n\n.workspace-dashboard__grid { @apply\n  grid\n  grid-cols-1\n  gap-4\n  items-start\n  xl:grid-cols-2\n}\n\n.workspace-dashboard__side { @apply\n  grid\n  grid-cols-1\n  gap-4\n}\n</style>"],"names":["provide","subscriptionIntervalKey","secondsToMilliseconds","api","useWorkspaceApi","flowRunsCountAllSubscription","useSubscription","loaded","computed","empty","crumbs","filter","useWorkspaceDashboardFilterFromRoute","secondsInDay","tasksFilter","mapper"],"mappings":"wcA6DEA,EAAQC,EAAyB,CAC/B,SAAUC,EAAsB,EAAE,CAAA,CACnC,EAED,MAAMC,EAAMC,IACNC,EAA+BC,EAAgBH,EAAI,SAAS,iBAAkB,CAAC,CAAE,CAAA,CAAC,EAClFI,EAASC,EAAS,IAAMH,EAA6B,QAAQ,EAC7DI,EAAQD,EAAS,IAAMH,EAA6B,WAAa,CAAC,EAClEK,EAAkB,CAAC,CAAE,KAAM,WAAa,CAAA,EAExCC,EAASC,EAAqC,CAClD,MAAO,CAAE,KAAM,OAAQ,QAAS,CAACC,CAAa,EAC9C,KAAM,CAAC,CAAA,CACR,EAEKC,EAAsC,IAAMC,EAAO,IAAI,2BAA4BJ,EAAQ,gBAAgB"}