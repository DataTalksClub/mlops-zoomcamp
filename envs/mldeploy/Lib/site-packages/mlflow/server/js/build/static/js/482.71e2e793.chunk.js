"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[482],{98597:function(e,t,s){s.d(t,{tj:function(){return v}});var a=s(89555),i=s(49409),l=s(67727),o=s(31014),n=s(88464),r=s(91167),d=s(56412),c=s(50111);const{Paragraph:g}=l.T;var u={name:"zjik7",styles:"display:flex"},h={name:"1ff36h2",styles:"flex-grow:1"};const m=o.memo((e=>{const{theme:t}=(0,l.u)();return(0,c.Y)(r.M,{title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:u,children:[(0,c.Y)(g,{css:h,children:(0,c.Y)("pre",{css:(0,a.AH)({backgroundColor:t.colors.backgroundPrimary,marginTop:t.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,a.AH)({marginTop:t.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(i.TdU,{}),"aria-label":"Copy"})})]})})})),p=30;function f(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const v=e=>{let{isClosable:t=!1,onClose:s,tag:r,enableFullViewModal:d=!1,charLimit:g=p,maxWidth:u=300,className:h}=e;const v=(0,n.A)(),[M,A]=(0,o.useState)(!1),{shouldTruncateKey:y,shouldTruncateValue:S}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;const{key:s,value:a}=e,i=s.length+a.length,l=s.length>a.length,o=l?a.length:s.length;return i<=t?{shouldTruncateKey:!1,shouldTruncateValue:!1}:o>t/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:l,shouldTruncateValue:!l}}(r,g),C=d&&(y||S),_=v.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(i.vwO,{closable:t,onClose:s,title:r.key,className:h,children:(0,c.Y)(i.m_M,{title:C?_:"",children:(0,c.FD)("span",{css:(0,a.AH)({maxWidth:u,display:"inline-flex"},""),onClick:()=>C?A(!0):void 0,children:[(0,c.Y)(l.T.Text,{bold:!0,title:r.key,css:f(y),children:r.key}),r.value&&(0,c.FD)(l.T.Text,{title:r.value,css:f(S),children:[": ",r.value]})]})})}),(0,c.Y)("div",{children:M&&(0,c.Y)(m,{tagKey:r.key,tagValue:r.value,isKeyValueTagFullViewModalVisible:M,setIsKeyValueTagFullViewModalVisible:A})})]})}},43683:function(e,t,s){s.d(t,{Q:function(){return _}});var a=s(89555),i=s(9133),l=s(31014),o=s(67727),n=s(91167),r=s(49409),d=s(59525),c=s(88464),g=s(88443),u=s(13369),h=s(50111);var m={name:"4zleql",styles:"display:block"};function p(e){return t=>function(e,t){const s=(0,c.A)(),{theme:n}=(0,o.u)(),g=e.props.searchValue.toLowerCase();return(0,l.useMemo)((()=>{if(!g)return e;if((0,i.sortedIndexOf)(t,g)>=0)return e;const o=/^[^,.:/=\-\s]+$/.test(g);return l.cloneElement(e,{flattenOptions:[{data:{value:g,disabled:!o,style:{color:o?n.colors.actionTertiaryTextDefault:n.colors.actionDisabledText},children:(0,h.Y)(r.m_M,{title:o?void 0:s.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,h.FD)("span",{css:m,children:[(0,h.Y)(d.P,{css:(0,a.AH)({marginRight:n.spacing.sm},"")}),s.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:g})]})})},key:g,groupOption:!1},...e.props.flattenOptions]})}),[t,e,g,s,n])}(t,e)}var f={name:"1d3w5wq",styles:"width:100%"};function v(e){let{allAvailableTags:t,control:s,onKeyChangeCallback:a}=e;const i=(0,c.A)(),[o,n]=(0,l.useState)(!1),d=(0,l.useRef)(null),{field:g,fieldState:m}=(0,u.as)({control:s,name:"key",rules:{required:{message:i.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,h.Y)(r._vn,{allowClear:!0,ref:d,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:p(t)},css:f,placeholder:i.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:g.value,defaultValue:g.value,open:o,onDropdownVisibleChange:e=>{n(e)},filterOption:(e,t)=>null===t||void 0===t?void 0:t.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{g.onChange(e),null===a||void 0===a||a(e)},onClear:()=>{g.onChange(void 0),null===a||void 0===a||a(void 0)},validationState:m.error?"error":void 0,children:t.map((e=>(0,h.Y)(r._vn.Option,{value:e,children:e},e)))})}var M=s(98597),A=s(52350);function y(e){return new Map(e.map((e=>[e.key,e])))}var S={name:"82a6rk",styles:"flex:1"},C={name:"82a6rk",styles:"flex:1"};const _=e=>{let{onSuccess:t,saveTagsHandler:s,allAvailableTags:m,valueRequired:p=!1}=e;const f=(0,l.useRef)(),[_,w]=(0,l.useState)(""),{theme:Y}=(0,o.u)(),[R,I]=(0,l.useState)(new Map),[b,D]=(0,l.useState)(new Map),[k,E]=(0,l.useState)(!1),x=(0,u.mN)({defaultValues:{key:void 0,value:""}}),V=()=>E(!1),P=(0,l.useCallback)((e=>{f.current=e,I(y(e.tags||[])),D(y(e.tags||[])),x.reset(),E(!0)}),[x]),N=async()=>{f.current&&(w(""),O(!0),s(f.current,Array.from(R.values()),Array.from(b.values())).then((()=>{V(),null===t||void 0===t||t(),O(!1)})).catch((e=>{var t;O(!1),w(e instanceof A.s?null===(t=e.getUserVisibleError())||void 0===t?void 0:t.message:e.message)})))},F=(0,c.A)(),L=x.watch(),[U,O]=(0,l.useState)(!1),K=(0,l.useMemo)((()=>!(0,i.isEqual)((0,i.sortBy)(Array.from(R.values()),"key"),(0,i.sortBy)(Array.from(b.values()),"key"))),[R,b]),q=L.key||L.value,B=K&&q;return{EditTagsModal:(0,h.FD)(n.M,{destroyOnClose:!0,visible:k,title:(0,h.Y)(g.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:V,footer:(0,h.FD)(o.R,{children:[(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:V,css:(0,a.AH)({marginRight:K?0:Y.spacing.sm},""),children:F.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),B?(0,h.Y)(T,{formValues:L,isLoading:U,onSaveTask:N}):(0,h.Y)(r.m_M,{title:K?void 0:F.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!K,loading:U,type:"primary",onClick:N,children:F.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,h.FD)("form",{onSubmit:x.handleSubmit((()=>{if(p&&!L.value.trim())return;const e=new Map(b);e.set(L.key,L),D(e),x.reset()})),css:(0,a.AH)({display:"flex",alignItems:"flex-end",gap:Y.spacing.md},""),children:[(0,h.FD)("div",{css:(0,a.AH)({minWidth:0,display:"flex",gap:Y.spacing.md,flex:1},""),children:[(0,h.FD)("div",{css:S,children:[(0,h.Y)(r.D$Q.Label,{htmlFor:"key",children:F.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,h.Y)(v,{allAvailableTags:m||[],control:x.control,onKeyChangeCallback:e=>{var t;const s=e?b.get(e):void 0;x.setValue("value",null!==(t=null===s||void 0===s?void 0:s.value)&&void 0!==t?t:"")}})]}),(0,h.FD)("div",{css:C,children:[(0,h.Y)(r.D$Q.Label,{htmlFor:"value",children:p?F.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):F.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,h.Y)(r.tc_.Input,{name:"value",control:x.control,"aria-label":p?F.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):F.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:F.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,h.Y)(r.m_M,{title:F.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":F.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,h.Y)(d.P,{})})})]}),_&&(0,h.Y)(r.D$Q.Message,{type:"error",message:_}),(0,h.Y)("div",{css:(0,a.AH)({display:"flex",rowGap:Y.spacing.xs,flexWrap:"wrap",marginTop:Y.spacing.sm},""),children:Array.from(b.values()).map((e=>(0,h.Y)(M.tj,{isClosable:!0,tag:e,onClose:()=>(e=>{let{key:t}=e;D((e=>(e.delete(t),new Map(e))))})(e)},e.key)))})]}),showEditTagsModal:P,isLoading:U}};var w={name:"1y0ex1",styles:"max-width:400px"};function T(e){let{isLoading:t,formValues:s,onSaveTask:l}=e;const r=(0,c.A)(),{theme:d}=(0,o.u)(),g=`${`${(0,i.truncate)(s.key,{length:20})||"_"}`}${s.value?`:${(0,i.truncate)(s.value,{length:20})}`:""}`,u=r.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:g});return(0,h.FD)(n.P.Root,{children:[(0,h.Y)(n.P.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:t,type:"primary",children:r.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,h.FD)(n.P.Content,{align:"end","aria-label":u,children:[(0,h.Y)(o.T.Paragraph,{css:w,children:u}),(0,h.Y)(n.P.Close,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:l,children:r.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,h.Y)(n.P.Close,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,a.AH)({marginLeft:d.spacing.sm},""),children:r.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,h.Y)(n.P.Arrow,{})]})]})}},45653:function(e,t,s){s.d(t,{Qr:function(){return r},Xb:function(){return u},Y7:function(){return l},fx:function(){return o},yv:function(){return d}});var a=s(9133),i=s.n(a);const l=(e,t)=>{const s=i().truncate(e,{length:t});return i().takeWhile(s,(e=>"\n"!==e)).join("")},o=(e,t)=>{if(e.length>t){const s=Math.floor((t-3)/2),a=t-3-s;return e.substring(0,s)+"..."+e.substring(e.length-a,e.length)}return e},n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=e=>{let t="",s=0;const a=c(e);for(;s<a.length;){const e=a.charCodeAt(s++),i=a.charCodeAt(s++),l=a.charCodeAt(s++),o=e>>2,r=(3&e)<<4|i>>4;let d=(15&i)<<2|l>>6,c=63&l;isNaN(i)?d=c=64:isNaN(l)&&(c=64),t=t+n.charAt(o)+n.charAt(r)+n.charAt(d)+n.charAt(c)}return t},d=e=>{let t="",s=0;const a=(null===e||void 0===e?void 0:e.replace(/[^A-Za-z0-9+/=]/g,""))||"";for(;s<a.length;){const e=n.indexOf(a.charAt(s++)),i=n.indexOf(a.charAt(s++)),l=n.indexOf(a.charAt(s++)),o=n.indexOf(a.charAt(s++)),r=e<<2|i>>4,d=(15&i)<<4|l>>2,c=(3&l)<<6|o;t+=String.fromCharCode(r),64!==l&&(t+=String.fromCharCode(d)),64!==o&&(t+=String.fromCharCode(c))}return g(t)},c=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\r\n/g,"\n");let t="";for(let s=0;s<e.length;s++){const a=e.charCodeAt(s);t+=a<128?String.fromCharCode(a):a>127&&a<2048?String.fromCharCode(a>>6|192)+String.fromCharCode(63&a|128):String.fromCharCode(a>>12|224)+String.fromCharCode(a>>6&63|128)+String.fromCharCode(63&a|128)}return t},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="",s=0;for(;s<e.length;){const a=e.charCodeAt(s);if(a<128)t+=String.fromCharCode(a),s++;else if(a>191&&a<224){const i=e.charCodeAt(s+1);t+=String.fromCharCode((31&a)<<6|63&i),s+=2}else{const i=e.charCodeAt(s+1),l=e.charCodeAt(s+2);t+=String.fromCharCode((15&a)<<12|(63&i)<<6|63&l),s+=3}}return t},u=e=>crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then((e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")))},29243:function(e,t,s){s.r(t),s.d(t,{ModelPage:function(){return ne},ModelPageImpl:function(){return ie},default:function(){return re}});var a=s(31014),i=s(10811),l=s(69708),o=s(67727),n=s(49409),r=s(59525),d=s(70618),c=s(9856),g=s(88464),u=s(88443),h=s(47664),m=s(81866),p=s(93215),f=s(69869),v=s(76010),M=s(89555),A=s(98597),y=s(50111);const S=e=>{let{tags:t=[],onAddEdit:s}=e;const{theme:a}=(0,o.u)();return(0,y.Y)("div",{css:(0,M.AH)({display:"flex",flexWrap:"wrap","> *":{marginRight:"0 !important"},gap:a.spacing.xs},""),children:t.length<1?(0,y.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagseditorcell.tsx_29",size:"small",type:"link",onClick:s,children:(0,y.Y)(u.A,{id:"Li72QU",defaultMessage:"Add"})}):(0,y.FD)(y.FK,{children:[t.map((e=>(0,y.Y)(A.tj,{tag:e},`${e.key}-${e.value}`))),(0,y.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagseditorcell.tsx_37",size:"small",icon:(0,y.Y)(n.R2l,{}),onClick:s})]})})};var C=s(43683),_=s(30311),w=s(64756);const T=e=>{let{aliases:t=[],onAddEdit:s}=e;const{theme:a}=(0,o.u)();return(0,y.Y)("div",{css:(0,M.AH)({maxWidth:300,display:"flex",flexWrap:"wrap",alignItems:"flex-start","> *":{marginRight:"0 !important"},rowGap:a.spacing.xs/2,columnGap:a.spacing.xs},""),children:t.length<1?(0,y.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_30",size:"small",type:"link",onClick:s,children:(0,y.Y)(u.A,{id:"pU6cxH",defaultMessage:"Add"})}):(0,y.FD)(y.FK,{children:[t.map((e=>(0,y.Y)(w.m,{value:e,css:(0,M.AH)({marginTop:a.spacing.xs/2},"")},e))),(0,y.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_41",size:"small",icon:(0,y.Y)(n.R2l,{}),onClick:s})]})})};var Y=s(45653);var R=function(e){return e.STATUS="STATUS",e.VERSION="VERSION",e.CREATION_TIMESTAMP="CREATION_TIMESTAMP",e.USER_ID="USER_ID",e.TAGS="TAGS",e.STAGE="STAGE",e.DESCRIPTION="DESCRIPTION",e.ALIASES="ALIASES",e}(R||{}),I={name:"10lkuaq",styles:".table-row-select-cell{align-items:flex-start;}"};const b=e=>{let{modelName:t,modelVersions:s,activeStageOnly:M,onChange:A,modelEntity:w,onMetadataUpdated:b,usingNextModelsUI:D,aliases:k}=e;const E=(0,a.useMemo)((()=>{const e={};return null===k||void 0===k||k.forEach((t=>{let{alias:s,version:a}=t;e[a]||(e[a]=[]),e[a].push(s)})),e}),[k]),x=(0,a.useMemo)((()=>M?(s||[]).filter((e=>{let{current_stage:t}=e;return m.jI.includes(t)})):s),[M,s]),{theme:V}=(0,o.u)(),P=(0,g.A)(),N=(0,a.useMemo)((()=>{const e=(null===x||void 0===x?void 0:x.map((e=>(null===e||void 0===e?void 0:e.tags)||[])).flat())||[];return Array.from(new Set(e.map((e=>{let{key:t}=e;return t})))).sort()}),[x]),F=(0,i.wA)(),{EditTagsModal:L,showEditTagsModal:U}=(0,C.Q)({allAvailableTags:N,saveTagsHandler:async(e,t,s)=>F((0,l.kM)(e,t,s)),onSuccess:b}),{EditAliasesModal:O,showEditAliasesModal:K}=(0,_.o)({model:w||null,onSuccess:b}),[q,B]=(0,a.useState)({}),[H,j]=(0,a.useState)({pageSize:10,pageIndex:0});(0,a.useEffect)((()=>{const e=(x||[]).filter((e=>{let{version:t}=e;return q[t]})),t=e.map((e=>{let{version:t}=e;return t}));A(t,e)}),[q,A,x]);const W=(0,a.useMemo)((()=>{const e=[{id:R.STATUS,enableSorting:!1,header:"",meta:{styles:{flexBasis:V.general.heightSm,flexGrow:0}},cell:e=>{let{row:{original:t}}=e;const{status:s,status_message:a}=t||{};return(0,y.Y)(n.m_M,{title:a||m.zr[s],children:(0,y.Y)(o.T.Text,{children:m.UA[s]})})}}];return e.push({id:R.VERSION,enableSorting:!1,header:P.formatMessage({id:"1f72BQ",defaultMessage:"Version"}),meta:{className:"model-version"},accessorKey:"version",cell:e=>{let{getValue:s}=e;return(0,y.Y)(u.A,{id:"yjerKR",defaultMessage:"<link>Version {versionNumber}</link>",values:{link:e=>(0,y.Y)(p.N_,{to:f.fM.getModelVersionPageRoute(t,String(s())),children:e}),versionNumber:s()}})}},{id:R.CREATION_TIMESTAMP,enableSorting:!0,meta:{styles:{minWidth:200}},header:P.formatMessage({id:"Nm/Pjx",defaultMessage:"Registered at"}),accessorKey:"creation_timestamp",cell:e=>{let{getValue:t}=e;return v.A.formatTimestamp(t())}},{id:R.USER_ID,enableSorting:!1,meta:{styles:{minWidth:100}},header:P.formatMessage({id:"xRw7H2",defaultMessage:"Created by"}),accessorKey:"user_id",cell:e=>{let{getValue:t}=e;return(0,y.Y)("span",{children:t()})}}),D?e.push({id:R.TAGS,enableSorting:!1,header:P.formatMessage({id:"7NOp4F",defaultMessage:"Tags"}),meta:{styles:{flex:2}},accessorKey:"tags",cell:e=>{let{getValue:t,row:{original:s}}=e;return(0,y.Y)(S,{tags:t(),onAddEdit:()=>{null===U||void 0===U||U(s)}})}},{id:R.ALIASES,accessorKey:"aliases",enableSorting:!1,header:P.formatMessage({id:"wNHR0W",defaultMessage:"Aliases"}),meta:{styles:{flex:2},multiline:!0},cell:e=>{let{getValue:s,row:{original:a}}=e;const i=E[a.version]||[];return(0,y.Y)(T,{modelName:t,version:a.version,aliases:i,onAddEdit:()=>{null===K||void 0===K||K(a.version)}})}}):e.push({id:R.STAGE,enableSorting:!1,header:P.formatMessage({id:"7F/CBv",defaultMessage:"Stage"}),accessorKey:"current_stage",cell:e=>{let{getValue:t}=e;return m.$0[t()]}}),e.push({id:R.DESCRIPTION,enableSorting:!1,header:P.formatMessage({id:"Vm9CvZ",defaultMessage:"Description"}),meta:{styles:{flex:2}},accessorKey:"description",cell:e=>{let{getValue:t}=e;return(0,Y.Y7)(t(),32)}}),e}),[V,P,t,U,K,D,E]),[G,z]=(0,a.useState)([{id:R.CREATION_TIMESTAMP,desc:!0}]),X=(0,d.N4)({data:x||[],columns:W,state:{pagination:H,rowSelection:q,sorting:G},getCoreRowModel:(0,c.HT)(),getSortedRowModel:(0,c.h5)(),getPaginationRowModel:(0,c.kW)(),getRowId:e=>{let{version:t}=e;return t},onRowSelectionChange:B,onSortingChange:z}),$=(0,y.Y)(n.dKS,{currentPageIndex:H.pageIndex+1,numTotal:(x||[]).length,onChange:(e,t)=>{j({pageSize:t||H.pageSize,pageIndex:e-1})},pageSize:H.pageSize}),Q=(0,y.Y)(n.SvL,{description:(0,y.Y)(u.A,{id:"ynkoR7",defaultMessage:"No models versions are registered yet. <link>Learn more</link> about how to register a model version.",values:{link:e=>(0,y.Y)(o.T.Link,{target:"_blank",href:h.gw,children:e})}}),image:(0,y.Y)(r.P,{})});return(0,y.FD)(y.FK,{children:[(0,y.FD)(n.XIK,{"data-testid":"model-list-table",pagination:$,scrollable:!0,empty:0===X.getRowModel().rows.length?Q:void 0,someRowsSelected:X.getIsSomeRowsSelected()||X.getIsAllRowsSelected(),children:[(0,y.FD)(n.Hjg,{isHeader:!0,children:[(0,y.Y)(n.p4w,{checked:X.getIsAllRowsSelected(),indeterminate:X.getIsSomeRowsSelected(),onChange:X.getToggleAllRowsSelectedHandler()}),X.getLeafHeaders().map((e=>{var t;return(0,y.Y)(n.A0N,{multiline:!1,sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,children:(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id)}))]}),X.getRowModel().rows.map((e=>(0,y.FD)(n.Hjg,{css:I,children:[(0,y.Y)(n.p4w,{checked:e.getIsSelected(),onChange:e.getToggleSelectedHandler()}),e.getAllCells().map((e=>{var t,s,a;return(0,y.Y)(n.nA6,{className:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.className,multiline:null===(s=e.column.columnDef.meta)||void 0===s?void 0:s.multiline,css:null===(a=e.column.columnDef.meta)||void 0===a?void 0:a.styles,children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))]},e.id)))]}),L,O]})};var D=s(21621),k=s(10405),E=s(85392),x=s(41287),V=s(65871),P=s(79085),N=s(64912),F=s(91167),L=s(90925),U=s(91144),O=s(84963),K=s(73414);const q="ALL",B="ACTIVE";var H={name:"1ootkdu",styles:"margin-bottom:8px;display:flex;justify-content:flex-end"};class j extends a.Component{constructor(e){super(e),this.state={stageFilter:q,showDescriptionEditor:!1,isDeleteModalVisible:!1,isDeleteModalConfirmLoading:!1,runsSelected:{},isTagsRequestPending:!1,updatingEmailPreferences:!1},this.formRef=a.createRef(),this.handleStageFilterChange=e=>{this.setState({stageFilter:e.target.value})},this.handleCancelEditDescription=()=>{this.setState({showDescriptionEditor:!1})},this.handleSubmitEditDescription=e=>this.props.handleEditDescription(e).then((()=>{this.setState({showDescriptionEditor:!1})})),this.startEditingDescription=e=>{e.stopPropagation(),this.setState({showDescriptionEditor:!0})},this.showDeleteModal=()=>{this.setState({isDeleteModalVisible:!0})},this.hideDeleteModal=()=>{this.setState({isDeleteModalVisible:!1})},this.showConfirmLoading=()=>{this.setState({isDeleteModalConfirmLoading:!0})},this.hideConfirmLoading=()=>{this.setState({isDeleteModalConfirmLoading:!1})},this.handleDeleteConfirm=()=>{const{navigate:e}=this.props;this.showConfirmLoading(),this.props.handleDelete().then((()=>{e(f.fM.modelListPageRoute)})).catch((e=>{this.hideConfirmLoading(),v.A.logErrorAndNotifyUser(e)}))},this.handleAddTag=e=>{const t=this.formRef.current,{model:s}=this.props,a=s.name;this.setState({isTagsRequestPending:!0}),this.props.setRegisteredModelTagApi(a,e.name,e.value).then((()=>{this.setState({isTagsRequestPending:!1}),t.resetFields()})).catch((e=>{this.setState({isTagsRequestPending:!1}),console.error(e),D.Ay.error("Failed to add tag. Error: "+e.getUserVisibleError())}))},this.handleSaveEdit=e=>{let{name:t,value:s}=e;const{model:a}=this.props,i=a.name;return this.props.setRegisteredModelTagApi(i,t,s).catch((e=>{console.error(e),D.Ay.error("Failed to set tag. Error: "+e.getUserVisibleError())}))},this.handleDeleteTag=e=>{let{name:t}=e;const{model:s}=this.props,a=s.name;return this.props.deleteRegisteredModelTagApi(a,t).catch((e=>{console.error(e),D.Ay.error("Failed to delete tag. Error: "+e.getUserVisibleError())}))},this.onChange=(e,t)=>{const s=Object.assign({},this.state);s.runsSelected={},t.forEach((e=>{s.runsSelected={...s.runsSelected,[e.version]:e.run_id}})),this.setState(s)},this.renderDetails=()=>{const{model:e,modelVersions:t,tags:s}=this.props,{stageFilter:a,showDescriptionEditor:i,isDeleteModalVisible:l,isDeleteModalConfirmLoading:r,isTagsRequestPending:d}=this.state,c=e.name,g=Object.keys(this.state.runsSelected).length<2;return(0,y.FD)("div",{css:G.wrapper,children:[(0,y.FD)(L.K,{columns:3,"data-testid":"model-view-metadata",children:[(0,y.Y)(L.K.Item,{"data-testid":"model-view-metadata-item",label:this.props.intl.formatMessage({id:"At3XhS",defaultMessage:"Created Time"}),children:v.A.formatTimestamp(e.creation_timestamp)}),(0,y.Y)(L.K.Item,{"data-testid":"model-view-metadata-item",label:this.props.intl.formatMessage({id:"j/pJM6",defaultMessage:"Last Modified"}),children:v.A.formatTimestamp(e.last_updated_timestamp)}),e.user_id&&(0,y.Y)(L.K.Item,{"data-testid":"model-view-metadata-item",label:this.props.intl.formatMessage({id:"1jPG5D",defaultMessage:"Creator"}),children:(0,y.Y)("div",{children:e.user_id})})]}),(0,y.Y)(k.i,{css:G.collapsiblePanel,title:(0,y.FD)("span",{children:[(0,y.Y)(u.A,{id:"oHW+ks",defaultMessage:"Description"})," ",i?null:this.renderDescriptionEditIcon()]}),forceOpen:i,defaultCollapsed:!e.description,"data-test-id":"model-description-section",children:(0,y.Y)(E.V,{defaultMarkdown:e.description,onSubmit:this.handleSubmitEditDescription,onCancel:this.handleCancelEditDescription,showEditor:i})}),(0,y.Y)("div",{"data-test-id":"tags-section",children:(0,y.Y)(k.i,{title:(0,y.Y)(u.A,{id:"HyBP+D",defaultMessage:"Tags"}),defaultCollapsed:0===v.A.getVisibleTagValues(s).length,"data-test-id":"model-tags-section",children:(0,y.Y)(x.A,{innerRef:this.formRef,handleAddTag:this.handleAddTag,handleDeleteTag:this.handleDeleteTag,handleSaveEdit:this.handleSaveEdit,tags:s,isRequestPending:d})})}),(0,y.FD)(k.i,{title:(0,y.Y)(y.FK,{children:(0,y.FD)("div",{css:G.versionsTabButtons,children:[(0,y.Y)("span",{children:(0,y.Y)(u.A,{id:"Z5en2d",defaultMessage:"Versions"})}),!this.props.usingNextModelsUI&&(0,y.FD)(n.d98,{name:"stage-filter",value:this.state.stageFilter,onChange:e=>this.handleStageFilterChange(e),children:[(0,y.Y)(n.EPn,{value:q,children:(0,y.Y)(u.A,{id:"vi2MM7",defaultMessage:"All"})}),(0,y.FD)(n.EPn,{value:B,children:[(0,y.Y)(u.A,{id:"xPkIEE",defaultMessage:"Active"})," ",this.getActiveVersionsCount()]})]}),(0,y.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_components_modelview.tsx_619","data-test-id":"compareButton",disabled:g,onClick:this.onCompare,children:(0,y.Y)(u.A,{id:"FpjDSq",defaultMessage:"Compare"})})]})}),"data-test-id":"model-versions-section",children:[(0,U.WX)()&&(0,y.Y)("div",{css:H,children:(0,y.Y)(O.C,{})}),(0,y.Y)(b,{activeStageOnly:a===B&&!this.props.usingNextModelsUI,modelName:c,modelVersions:t,modelEntity:e,onChange:this.onChange,onMetadataUpdated:this.props.onMetadataUpdated,usingNextModelsUI:this.props.usingNextModelsUI,aliases:null===e||void 0===e?void 0:e.aliases})]}),(0,y.Y)(F.D,{"data-testid":"mlflow-input-modal",title:this.props.intl.formatMessage({id:"Gg/vLZ",defaultMessage:"Delete Model"}),visible:l,confirmLoading:r,onOk:this.handleDeleteConfirm,okText:this.props.intl.formatMessage({id:"a8rS4O",defaultMessage:"Delete"}),cancelText:this.props.intl.formatMessage({id:"yK/6vg",defaultMessage:"Cancel"}),onCancel:this.hideDeleteModal,children:(0,y.Y)("span",{children:(0,y.Y)(u.A,{id:"HUf9qJ",defaultMessage:"Are you sure you want to delete {modelName}? This cannot be undone.",values:{modelName:c}})})})]})},this.onCompare=this.onCompare.bind(this)}componentDidMount(){const e=`${this.props.model.name} - MLflow Model`;v.A.updatePageTitle(e)}getActiveVersionsCount(){const{modelVersions:e}=this.props;return e?e.filter((e=>m.jI.includes(e.current_stage))).length:0}getOverflowMenuItems(){return[{id:"delete",itemName:(0,y.Y)(u.A,{id:"9fVZg8",defaultMessage:"Delete"}),onClick:this.showDeleteModal,disabled:this.getActiveVersionsCount()>0}]}onCompare(){this.props.model&&this.props.navigate(f.fM.getCompareModelVersionsPageRoute(this.props.model.name,this.state.runsSelected))}renderDescriptionEditIcon(){return(0,y.Y)(o.B,{componentId:"codegen_mlflow_app_src_model-registry_components_modelview.tsx_467","data-test-id":"descriptionEditButton",type:"link",css:G.editButton,onClick:this.startEditingDescription,children:(0,y.Y)(u.A,{id:"36g3aR",defaultMessage:"Edit"})})}renderMainPanel(){return this.renderDetails()}render(){const{model:e}=this.props,t=e.name,s=[(0,y.Y)(p.N_,{to:f.fM.modelListPageRoute,children:(0,y.Y)(u.A,{id:"raa3Ij",defaultMessage:"Registered Models"})})];return(0,y.FD)("div",{children:[(0,y.Y)(P.z,{title:t,breadcrumbs:s,children:(0,y.Y)(P.o,{menu:this.getOverflowMenuItems()})}),this.renderMainPanel()]})}}const W={setRegisteredModelTagApi:l._e,deleteRegisteredModelTagApi:l.bE},G={emailNotificationPreferenceDropdown:e=>({width:300,marginBottom:e.spacing.md}),emailNotificationPreferenceTip:e=>({paddingLeft:e.spacing.sm,paddingRight:e.spacing.sm}),wrapper:e=>({".collapsible-panel":{marginBottom:e.spacing.md},'div[role="button"][aria-expanded]':{height:e.general.buttonHeight}}),editButton:e=>({marginLeft:e.spacing.md}),versionsTabButtons:e=>({display:"flex",gap:e.spacing.md,alignItems:"center"})},z=(0,i.Ng)(((e,t)=>{const s=t.model.name;return{tags:(0,V.ZG)(s,e)}}),W)((0,K.p)((0,N.Ay)(j)));var X=s(48588),$=s(3769),Q=s(96277),Z=s(82214),J=s(7204),ee=s(52350),te=s(25869),se=s(26645),ae=s(62448);class ie extends a.Component{constructor(){super(...arguments),this.hasUnfilledRequests=void 0,this.pollIntervalId=void 0,this.initSearchModelVersionsApiRequestId=(0,J.yk)(),this.initgetRegisteredModelApiRequestId=(0,J.yk)(),this.updateRegisteredModelApiId=(0,J.yk)(),this.deleteRegisteredModelApiId=(0,J.yk)(),this.criticalInitialRequestIds=[this.initSearchModelVersionsApiRequestId,this.initgetRegisteredModelApiRequestId],this.handleEditDescription=e=>{const{model:t}=this.props;return this.props.updateRegisteredModelApi(t.name,e,this.updateRegisteredModelApiId).then(this.loadData)},this.handleDelete=()=>{const{model:e}=this.props;return this.props.deleteRegisteredModelApi(e.name,this.deleteRegisteredModelApiId)},this.loadData=e=>{const{modelName:t}=this.props;this.hasUnfilledRequests=!0;const s=[this.props.getRegisteredModelApi(t,!0===e?this.initgetRegisteredModelApiRequestId:null),this.props.searchModelVersionsApi({name:t},!0===e?this.initSearchModelVersionsApiRequestId:null)];return Promise.all(s).then((()=>{this.hasUnfilledRequests=!1}))},this.pollData=()=>{const{modelName:e,navigate:t}=this.props;return!this.hasUnfilledRequests&&v.A.isBrowserTabVisible()?this.loadData().catch((s=>{s instanceof ee.s&&"RESOURCE_DOES_NOT_EXIST"===s.getErrorCode()?(v.A.logErrorAndNotifyUser(s),this.props.deleteRegisteredModelApi(e,void 0,!0),t(f.fM.modelListPageRoute)):console.error(s),this.hasUnfilledRequests=!1})):Promise.resolve()}}componentDidMount(){this.loadData(!0).catch(console.error),this.hasUnfilledRequests=!1,this.pollIntervalId=setInterval(this.pollData,m.Gs)}componentWillUnmount(){clearInterval(this.pollIntervalId)}render(){const{model:e,modelVersions:t,navigate:s,modelName:a}=this.props;return(0,y.Y)(X.L,{children:(0,y.Y)($.Ay,{requestIds:this.criticalInitialRequestIds,children:(i,l,o)=>{if(l){if(clearInterval(this.pollIntervalId),v.A.shouldRender404(o,[this.initgetRegisteredModelApiRequestId]))return(0,y.Y)(Z.E,{statusCode:404,subMessage:this.props.intl.formatMessage({id:"tD0/e2",defaultMessage:"Model {modelName} does not exist"},{modelName:a}),fallbackHomePageReactRoute:f.fM.modelListPageRoute});const e=o.filter((e=>{var t;return this.criticalInitialRequestIds.includes(e.id)&&(null===(t=e.error)||void 0===t?void 0:t.getErrorCode())===h.tG.PERMISSION_DENIED}));var n;if(e&&e[0])return(0,y.Y)(Z.E,{statusCode:403,subMessage:this.props.intl.formatMessage({id:"rJitqj",defaultMessage:'Permission denied for {modelName}. Error: "{errorMsg}"'},{modelName:a,errorMsg:null===(n=e[0].error)||void 0===n?void 0:n.getMessageField()}),fallbackHomePageReactRoute:f.fM.modelListPageRoute});(0,$.dD)(o)}else{if(i)return(0,y.Y)(Q.y,{});if(e)return(0,y.Y)(z,{model:e,modelVersions:t,handleEditDescription:this.handleEditDescription,handleDelete:this.handleDelete,navigate:s,onMetadataUpdated:this.loadData})}return null}})})}}const le={searchModelVersionsApi:l.hY,getRegisteredModelApi:l.SY,updateRegisteredModelApi:l.tL,deleteRegisteredModelApi:l.r9},oe=(0,te.h)((0,i.Ng)(((e,t)=>{const s=decodeURIComponent(t.params.modelName);return{modelName:s,model:e.entities.modelByName[s],modelVersions:(0,V.Tr)(e,s)}}),le)((0,N.Ay)(ie))),ne=(0,se.X)(ae.A.mlflowServices.MODEL_REGISTRY,oe);var re=ne},56412:function(e,t,s){s.d(t,{i:function(){return d}});var a=s(31014),i=s(88443),l=s(49409),o=s(67727),n=s(50111);var r={name:"1739oy8",styles:"z-index:1"};const d=e=>{let{copyText:t,showLabel:s=!0,...d}=e;const[c,g]=(0,a.useState)(!1);return(0,n.Y)(l.m_M,{title:(0,n.Y)(i.A,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:c},children:(0,n.Y)(o.B,{componentId:"codegen_mlflow_app_src_shared_building_blocks_copybutton.tsx_35",type:"primary",onClick:()=>{navigator.clipboard.writeText(t),g(!0),setTimeout((()=>{g(!1)}),3e3)},onMouseLeave:()=>{g(!1)},css:r,children:s?(0,n.Y)(i.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...d})})}}}]);
//# sourceMappingURL=482.71e2e793.chunk.js.map